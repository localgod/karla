<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Karla by localgod</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="stylesheets/prettyprint.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body onload="prettyPrint()">
    <div class="wrapper">
      <header>
        <h1>Karla</h1>
        <p>Php ImageMagick wrapper with method chaining</p>

        <ul>
          <li><a href="https://github.com/localgod/Karla/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/localgod/Karla/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/localgod/Karla">View On <strong>GitHub</strong></a></li>
        </ul>
        <p>Build artifacts</p>
        <ul>
          <li><a href="api/index.html">View <strong>API</strong></a></li>
          <li><a href="pmd/index.html">View <strong>PMD</strong></a></li>
          <li><a href="coverage/index.dashboard.html">View <strong>Coverage</strong></a></li>
        </ul>
      </header>
      <section>
<h2>Why would you want to use Karla</h2>
<p>For most people who starts working with <a href=http://www.php.net/"">php</a> and <a href="http://www.imagemagick.org">ImageMagick</a> you either install the PECL extension 
<a href="http://pecl.php.net/package/imagick">Imagick</a> or work directly with ImageMagick through 
<a href="http://php.net/manual/en/function.shell-exec.php">shell_exec()</a>.</p>
<p>While Imagick has a much bigger feature set that Karla ever will, it is still a limited implementation of all the features available
in ImageMagick's toolbox. Karla allows you to access all of ImageMagick like with the <em>shell_exec()</em> approche, and have focused on making 
some commen operations convinient.
</p>
<p>Karla offers a subset of the functionalities that Imagick provides, but with two destinct 
differences which is why Karla was written:</p>
<ul>
<li>You can chain your argument so your image operations are more query like.</li>
<li>You have direct access to ImageMagick's console tools in a convenient way, should you need the full power of ImageMagick.</li>
</ul>
<p>Karla is tested complient with the 5.3 and 5.4 version of php, and have a decent suite of unittests.</p>
<h2>Requirements</h2>
<ul>
<li>Php version 5.3&lt; build with the following extension: pcre, SPL (default build-in in most distributions)</li>
<li>Your php setup need to allow <em><a href="http://php.net/manual/en/function.shell-exec.php">shell_exec()</a></em></li>
<li><a href="http://www.imagemagick.org">ImageMagick</a></li>
</ul>
<h2>Installation</h2>
<p>Copy the Karla folder to your site, and add the following lines to you script:</p>
<pre class="prettyprint lang-php">
spl_autoload_register(
function ($name)
{
    if ('Karla\\' == substr($name, 0, 6)) {
        $path = __DIR__ . '/../src' . DIRECTORY_SEPARATOR
        . str_replace('\\', DIRECTORY_SEPARATOR, $name)
        . '.php';
        require_once $path;
    }
});
</pre>
<p>Or you can just use <a href="http://getcomposer.org/">Composer</a>.</p>
<h2>Examples</h2>
<p>The following sections illustrates common operations performed with Imagick, Karla and in the console.</p>
<h3>Change format to png.</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo.png"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->setImageFormat('png');
    $image->writeImage('demo.png', true);    </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->inputfile('demo.jpg')->outputfile('demo.png')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert "demo.jpg" "demo.png"     </pre>
     <hr/>
         <h3>Resize image</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-100x100.jpg"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->resizeImage(200, 200, Imagick::FILTER_LANCZOS, 0.9, true);
    $image->writeImage('demo-100x100.jpg', true);    </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->resize(100, 100)->inputfile('demo.jpg')->outputfile('demo-100x100.jpg')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert -resize 100x100\> "demo.jpg" "demo-100x100.jpg"     </pre>
     <hr/>
         <h3>Change quality</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-low.jpg"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->setImageCompression(imagick::COMPRESSION_JPEG);
    $image->setImageCompressionQuality(10);
    $image->writeImage('demo-low.jpg');     </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->quality(10)->inputfile('demo.jpg')->outputfile('demo-low.jpg')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert -quality 10 "demo.jpg" "demo-low.jpg"     </pre>
     <hr/>
         <h3>Crop image</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-crop.jpg"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->cropImage(100, 100, 50, 50);
    $image->writeImage('demo-crop.jpg');     </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->crop(100, 100, 50, 50)->inputfile('demo.jpg')->outputfile('demo-crop.jpg')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert -crop 100x100+50+50 +repage "demo.jpg" "demo-crop.jpg"     </pre>
     <hr/>
         <h3>Mirror image vertical</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-flip.jpg"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->flipImage();
    $image->writeImage('demo-flip.jpg');     </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->flip()->inputfile('demo.jpg')->outputfile('demo-flip.jpg')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert -flip "demo.jpg" "demo-flip.jpg"     </pre>
     <hr/>
         <h3>Mirror image horizontal</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-flop.jpg"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->flopImage();
    $image->writeImage('demo-flop.jpg');     </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->flop()->inputfile('demo.jpg')->outputfile('demo-flop.jpg')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert -flop "demo.jpg" "demo-flop.jpg"     </pre>
     <hr/>
         <h3>Grayscale image</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-grayscale.jpg"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->modulateImage(100,0,100);  
    $image->writeImage('demo-grayscale.jpg');     </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->type('Grayscale')->inputfile('demo.jpg')->outputfile('demo-grayscale.jpg')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert -type Grayscale "demo.jpg" "demo-grayscale.jpg"     </pre>
     <hr/>
         <h3>Sepia tone image</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-sepia.jpg"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->sepiaToneImage();  
    $image->writeImage('demo-sepia.jpg');     </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->sepia(80)->inputfile('demo.jpg')->outputfile('demo-sepia.jpg')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert "demo.jpg" -sepia-tone 80% "demo-sepia.jpg"     </pre>
     <hr/>
         <h3>Add polaroid effect to image</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-polaroid.png"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
    $image->readImage('demo.jpg');
    $image->polaroidImage(new ImagickDraw(), 25);
    $image->writeImage('demo-sepia.jpg');     </pre>
    <h4>Karla code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->polaroid(-10)->borderColor('#ffffff')->background('#000000')->inputfile('demo.jpg')->outputfile('demo-polaroid.png')->execute();    </pre>
    <h4>Imagemagick in console</h4>
    <pre class="prettyprint lang-bsh">
    convert -polaroid -10  -bordercolor "#ffffff"  -background "#000000" "demo.jpg" "demo-polaroid.png"     </pre>
     <hr/>
    <h3>Rotate image 45 degrees left</h3>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-rotate.png"/>
    <h4>Imagick code</h4>
    <pre class="prettyprint lang-php">
    $image = new Imagick();
	$image->readImage('demo.jpg');
	$image->rotateImage(new ImagickPixel('gray'), -45);
	$image->writeImage('demo-rotate.jpg');     </pre>
    <h4>Karla query code</h4>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->rotate(-45, 'gray')->inputfile('demo.jpg')->outputfile('demo-rotate.png')->execute();    </pre>
    <h4>Imagemagick query</h4>
    <pre class="prettyprint lang-bsh">
    convert -rotate "-45"  -background "gray" "demo.jpg" "demo-rotate.png"</pre>
     <hr/>

    <h2>Do 'magic' stuff</h2>
    <img alt="demo" src="images/demo.jpg"/>
    <img alt="demo" src="images/demo-magic.png"/>
    <h3>Imagick code</h3>
    <pre class="prettyprint lang-php">
    //Not possible (but you can achive a similar result) </pre>
    <h3>Karla query code</h3>
    <pre class="prettyprint lang-php">
    Karla::getInstance()->convert()->raw('-vignette 5x65000 -gaussian-blur 20')->inputfile('demo.jpg')->outputfile('demo-magic.png')->execute();    </pre>
    <h3>Imagemagick query</h3>
    <pre class="prettyprint lang-bsh">
    convert -vignette 5x65000 -gaussian-blur 20 "demo.jpg" "demo-magic.png"</pre>
     <hr/>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/localgod">localgod</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/prettify/188.0.0/prettify.js"></script>
  </body>
</html>